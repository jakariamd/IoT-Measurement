<div><h1>  Parental Control</h1><p>  With the parental control API you can define rules to limit or block
access to internet for any host on your local network. With a planning
you can change the access policy during the day.</p><p>  The different access policies are:</p><td>  allowed</td><td>  access is allowed</td><td>  denied</td><td>  access is denied</td><td>  webonly</td><td>  access is granted only for HTTP and HTTPS traffic</td></div> <div><h2>  Parental Control errors</h2><p>  When attempting to access the parental control API, you may encounter
the following errors:</p><td>  inval</td><td>  invalid request</td><td>  exist</td><td>  a rule already exists for this host</td><td>  noent</td><td>  invalid rule id</td></div> <div><h2>  Parental Filter Config</h2><p>  Parental filter configuration allow you to set the default
filter_state to apply to hosts without rules on your network</p><p>  see available filter_state</p></div> <div><h2>  Parental Filter Planning</h2><p>  Parental filter planning let you define the parental filter policy
based on the week day and the hour.</p><p>  Parental filter planning have the following attributes:</p><p>  planning resolution : number of planning slots per day, e.g. 48
means that each slot represent 30 minutes</p><span>  [] array of </span><p>  list of custom day range, each custom day range represents a
group of days for which you want to use a different planning
than other week days.</p></div> <div><p>  For instance a custom day range can contain the list of you children
holidays</p><td>  :fr_bank_holidays</td><td>  French bank holidays</td><td>  :fr_school_holidays_a</td><td>  French school holidays - Zone A</td><td>  :fr_school_holidays_b</td><td>  French school holidays - Zone B</td><td>  :fr_school_holidays_c</td><td>  French school holidays - Zone C</td><td>  :fr_school_holidays_corse</td><td>  French school holidays - Corse</td><p>  each cdayranges can be a coma separated list of cdayranges, for
instance ”:fr_bank_holidays,:fr_school_holidays_b”</p></div> <div><span>  [] array of </span><p>  array of states for each corresponding planning slots.  the
array size is : (number of cdayranges + 7) * resolution</p></div> <div><h2>  Parental Filter rule object</h2><p>  Parental filter rule objects have the following attributes:</p><p>  filter id</p><span>  [] array of </span><p>  the list of mac addresses the rule should be applied to</p><span>  [] array of </span><p>  the list of hostnames associated with macs</p><p>  only filled for old rules, you cannot set a rule with an IP</p><p>  a description for this rule</p><p>  is set to true, the rule will not use the planning and will
always stay in the forced_mode</p><p>  the filter policy to use when forced is set to true (see
filter_state for valid states)</p></div> <div><p>  if != 0 the rule will not use the planning for the next
tmp_mode_expire seconds</p><p>  the filter policy to use when tmp_mode_expire is != 0 (see
filter_state for valid states)</p><td>  forced</td><td>  filter_state is forced to forced_mode</td><td>  temporary</td><td>  filter_state is temporary set to tmp_mode for
the next tmp_mode_expire seconds</td><td>  planning</td><td>  filter_state is set using the planning</td><td>  allowed</td><td>  access is allowed</td><td>  denied</td><td>  access is denied</td></div> <div><td>  webonly</td><td>  access is granted only for HTTP and HTTPS traffic</td><p>  current index used in planning to compute filter_state (only
relevant when scheduling_mode is planning)</p><p>  seconds until next filter_state change 0 means filter_state
won’t change</p></div> <div><h2>  Parental Filter API</h2></div> <div><h3>  Get parental filter config</h3><p>  Get the </p><span>  ParentalFilterConfig</span><p>  <strong> Example request </strong>:</p><span>  GET</span><span>  /api/v4/parental/config/</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span><span>  "success"</span><span>  true</span></div> <div><span>  "result"</span><span>  "default_filter_mode"</span><span>  "allowed"</span></div> <div><h3>  Update parental filter config</h3><p>  Update the </p><span>  ParentalFilterConfig</span><p>  <strong> Example request </strong>:</p><span>  PUT</span><span>  /api/v4/parental/config/</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><span>  "default_filter_mode"</span><span>  "denied"</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span></div> <div><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "default_filter_mode"</span><span>  "denied"</span></div> <div><h3>  Retrieve all Parental Filter rules</h3><p>  Returns the collection of all </p><span>  ParentalFilter rules.</span><p>  <strong> Example request </strong>:</p><span>  GET</span><span>  /api/v4/parental/filter/</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span></div> <div><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "forced"</span><span>  false</span><span>  "id"</span><span>  "hosts"</span><span>  "iPad-r0ro"</span><span>  "iPhone-r0ro"</span><span>  ],</span><span>  "tmp_mode_expire"</span><span>  "ip"</span><span>  "0.0.0.0"</span><span>  "forced_mode"</span><span>  "allowed"</span><span>  "scheduling_mode"</span><span>  "planning"</span><span>  "macs"</span><span>  "D8:A2:CA:FE:BA:DF"</span><span>  "D0:23:BE:DE:AD:EF"</span><span>  ],</span></div> <div><span>  "current_mapping_idx"</span><span>  225</span><span>  "next_change"</span><span>  620</span><span>  "desc"</span><span>  "r0ro"</span><span>  "tmp_mode"</span><span>  "allowed"</span><span>  "filter_state"</span><span>  "allowed"</span><span>  },</span><span>  "forced"</span><span>  false</span><span>  "id"</span><span>  "hosts"</span><span>  "00:07:CB:00:00:07"</span><span>  ],</span><span>  "tmp_mode_expire"</span><span>  "ip"</span><span>  "0.0.0.0"</span><span>  "forced_mode"</span><span>  "allowed"</span></div> <div><span>  "scheduling_mode"</span><span>  "planning"</span><span>  "macs"</span><span>  "00:07:CB:00:00:07"</span><span>  ],</span><span>  "current_mapping_idx"</span><span>  225</span><span>  "next_change"</span><span>  "desc"</span><span>  ""</span><span>  "tmp_mode"</span><span>  "allowed"</span><span>  "filter_state"</span><span>  "allowed"</span></div> <div><h3>  Retrieve a Parental Filter rule</h3><p>  Returns the </p><span>  ParentalFilter rule with the given id</span><p>  <strong> Example request </strong>:</p><span>  GET</span><span>  /api/v4/parental/filter/4</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span><span>  "success"</span></div> <div><span>  true</span><span>  "result"</span><span>  "forced"</span><span>  false</span><span>  "id"</span><span>  "hosts"</span><span>  "iPad-r0ro"</span><span>  "iPhone-r0ro"</span><span>  ],</span><span>  "tmp_mode_expire"</span><span>  "ip"</span><span>  "0.0.0.0"</span><span>  "forced_mode"</span><span>  "allowed"</span><span>  "scheduling_mode"</span><span>  "planning"</span><span>  "macs"</span><span>  "D8:A2:5E:1B:3F:9F"</span><span>  "D0:23:DB:20:70:12"</span><span>  ],</span><span>  "current_mapping_idx"</span></div> <div><span>  225</span><span>  "next_change"</span><span>  529</span><span>  "desc"</span><span>  ""</span><span>  "tmp_mode"</span><span>  "allowed"</span><span>  "filter_state"</span><span>  "allowed"</span></div> <div><h3>  Delete a Parental Filter rule</h3><p>  Deletes the </p><span>  ParentalFilter rule with the given id</span><p>  <strong> Example request </strong>:</p><span>  DELETE</span><span>  /api/v4/parental/filter/4</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span><span>  "success"</span></div> <div><span>  true</span></div> <div><h3>  Update a Parental Filter rule</h3><p>  Updates the </p><span>  ParentalFilter rule with the given id</span><p>  <strong> Example request </strong>:</p><span>  PUT</span><span>  /api/v4/parental/filter/4</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><span>  "forced_mode"</span><span>  "denied"</span><span>  "forced"</span><span>  true</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span></div> <div><span>  Content-Type</span><span>  application/json; charset=utf-8</span><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "forced"</span><span>  true</span><span>  "id"</span><span>  "hosts"</span><span>  "iPad-r0ro"</span><span>  "iPhone-r0ro"</span><span>  ],</span><span>  "tmp_mode_expire"</span><span>  "ip"</span><span>  "0.0.0.0"</span><span>  "forced_mode"</span><span>  "denied"</span><span>  "scheduling_mode"</span><span>  "forced"</span><span>  "macs"</span><span>  "D8:A2:5E:1B:3F:9F"</span></div> <div><span>  "D0:23:DB:20:70:12"</span><span>  ],</span><span>  "current_mapping_idx"</span><span>  "next_change"</span><span>  "desc"</span><span>  ""</span><span>  "tmp_mode"</span><span>  "allowed"</span><span>  "filter_state"</span><span>  "denied"</span></div> <div><h3>  Add a Parental Filter rule</h3><p>  Add a parental filter rule</p><p>  <strong> Example request </strong>:</p><span>  POST</span><span>  /api/v4/parental/filter/</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><span>  "macs"</span><span>  "00:07:cb:00:00:69"</span><span>  "00:07:cb:00:00:42"</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span></div> <div><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "forced"</span><span>  false</span><span>  "id"</span><span>  "hosts"</span><span>  "00:07:CB:00:00:69"</span><span>  "00:07:CB:00:00:42"</span><span>  ],</span><span>  "tmp_mode_expire"</span><span>  "ip"</span><span>  "0.0.0.0"</span><span>  "forced_mode"</span><span>  "allowed"</span><span>  "scheduling_mode"</span><span>  "planning"</span><span>  "macs"</span><span>  "00:07:CB:00:00:69"</span><span>  "00:07:CB:00:00:42"</span></div> <span><span>  ],</span></span> <div><span>  "current_mapping_idx"</span><span>  "next_change"</span><span>  "desc"</span><span>  ""</span><span>  "tmp_mode"</span><span>  "allowed"</span><span>  "filter_state"</span><span>  "allowed"</span></div> <div><h2>  Parental Filter Planning API</h2></div> <div><h3>  Get a parental filter Planning</h3><p>  Returns the </p><span>  ParentalFilterPlanning for the filter
with the given id</span><p>  <strong> Example request </strong>:</p><span>  GET</span><span>  /api/v4/parental/filter/4/planning</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span></div> <div><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "cdayranges"</span><span>  ":fr_bank_holidays,:fr_school_holidays_c,"</span><span>  ],</span><span>  "resolution"</span><span>  48</span><span>  "mapping"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  ...</span><span>  "denied"</span><span>  "denied"</span><span>  "denied"</span><span>  "denied"</span></div> <div><span>  "denied"</span><span>  "denied"</span><span>  "denied"</span><span>  "denied"</span><span>  "denied"</span></div> <div><h3>  Update a parental filter Planning</h3><p>  Update the </p><span>  ParentalFilterPlanning for the parental
filter rule with the given id</span><p>  <strong> Example request </strong>:</p><span>  PUT</span><span>  /api/v4/parental/filter/4/planning</span><span>  HTTP</span><span>  1.1</span><span>  Host</span><span>  mafreebox.freebox.fr</span><span>  "cdayranges"</span><span>  [],</span><span>  "resolution"</span><span>  48</span><span>  "mapping"</span><span>  "webonly"</span><span>  "webonly"</span></div> <div><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  "allowed"</span><span>  ...</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><p>  <strong> Example response </strong>:</p><span>  HTTP</span><span>  1.1</span><span>  200</span><span>  OK</span><span>  Content-Type</span><span>  application/json; charset=utf-8</span></div> <div><span>  "success"</span><span>  true</span><span>  "result"</span><span>  "cdayranges"</span><span>  [],</span><span>  "resolution"</span><span>  48</span><span>  "mapping"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "allowed"</span><span>  "allowed"</span><span>  ...</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span><span>  "webonly"</span></div> <div><span>  }</span></div>